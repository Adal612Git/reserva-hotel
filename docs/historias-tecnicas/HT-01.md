# HT-01: Configurar base de datos PostgreSQL con scripts iniciales (init.sql)

---

## ğŸ§‘â€ğŸ’» Historia TÃ©cnica

**Como** desarrollador backend del sistema,  
**quiero** configurar la base de datos PostgreSQL con scripts SQL iniciales,  
**para** asegurar que todas las tablas, relaciones y estructuras estÃ©n listas desde el inicio del proyecto, de forma reproducible.

---

## ğŸ“Œ Estatus  
âœ… Pendiente de desarrollo

---

## ğŸ¯ PriorizaciÃ³n  
Alta â€” Bloquea el desarrollo backend y pruebas funcionales si no se implementa.

---

## ğŸ‘¥ Actor TÃ©cnico Principal  
Equipo de desarrollo backend / DBA (Database Administrator)

---

## ğŸ”— RelaciÃ³n con otras historias tÃ©cnicas

- **HT-02**: Estructura de backend con rutas, modelos y controladores  
- **HT-10**: Crear script `reset-db.sh`  
- **HU-03**: Crear nueva reserva (requiere tablas `usuarios`, `habitaciones`, `reservas`)  
- **HU-08â€“09**: Crear / eliminar habitaciones  
- **HU-17**: Ver usuarios registrados

---

## ğŸ§± Requisitos Previos

- Tener acceso a una instancia PostgreSQL (local o en nube)
- Archivo `init.sql` en carpeta `scripts/`
- ConexiÃ³n backend configurada con variables `.env`
- Herramienta de ejecuciÃ³n (psql, DBeaver, Docker, etc.)

---

## âœ… Criterios de AceptaciÃ³n

### ğŸ¯ Criterio 1: Script Ãºnico y reproducible
- [ ] El archivo `init.sql` debe crear toda la estructura inicial del sistema:
  - Tablas necesarias (usuarios, habitaciones, reservas, etc.)
  - Llaves primarias y forÃ¡neas
  - Tipos de datos correctos
  - Estados o valores por defecto (ej. roles)
- [ ] Debe poder ejecutarse en una sola instrucciÃ³n.

### ğŸ¯ Criterio 2: Script seguro y consistente
- [ ] No debe borrar datos de forma automÃ¡tica (uso solo para inicializaciÃ³n, no reseteo)
- [ ] Debe permitir ejecutar mÃºltiples veces sin fallar (uso de `IF NOT EXISTS`)
- [ ] Las relaciones entre tablas deben estar correctamente definidas.

### ğŸ¯ Criterio 3: ValidaciÃ³n funcional
- [ ] Al ejecutar el script, debe ser posible iniciar el backend sin errores
- [ ] El sistema debe poder registrar usuarios y crear reservas (mÃ­nimos vitales)

---

## ğŸ”„ Flujo de trabajo esperado

1. Se define la estructura lÃ³gica del sistema (modelo entidad-relaciÃ³n).
2. Se escribe el script `init.sql` con todas las tablas necesarias.
3. Se prueba su ejecuciÃ³n localmente o desde contenedor.
4. Se documenta cÃ³mo ejecutarlo.
5. Se sube al repositorio dentro de `scripts/` con instrucciones en `README.md`.

---

## ğŸ“‰ Flujos Alternativos / Consideraciones

### âŒ Script con errores de sintaxis
- Debe rechazarse y corregirse antes de subir

### âŒ Falta de relaciones clave
- Si hay errores de diseÃ±o relacional (ej. campos sin foreign key), debe corregirse

### âŒ Script no compatible con ambientes productivos
- Debe evitar `DROP TABLE` sin control, o acciones destructivas automÃ¡ticas

---

## ğŸ§ª Escenarios de prueba

### âœ”ï¸ EjecuciÃ³n inicial exitosa
```gherkin
Dado que el script init.sql estÃ¡ preparado
Cuando un desarrollador lo ejecuta en una nueva base de datos vacÃ­a
Entonces todas las tablas deben crearse correctamente, y el sistema debe estar listo para iniciar
