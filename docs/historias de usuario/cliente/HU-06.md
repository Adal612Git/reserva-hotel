# HU-06: Ver habitaciones disponibles

---

## ğŸ“ Historia de Usuario

**Como** cliente autenticado o visitante,  
**quiero** poder consultar quÃ© habitaciones estÃ¡n disponibles para un rango de fechas y nÃºmero de personas,  
**para** elegir una que se adapte a mis necesidades y realizar una reserva.

---

## ğŸ“Œ Estatus  
âœ… Pendiente de desarrollo

---

## ğŸ¯ PriorizaciÃ³n  
Alta â€” Es un paso previo e indispensable para crear una nueva reserva (HU-03).

---

## ğŸ‘¤ Actor Principal  
- Cliente (autenticado)  
- Usuario visitante (sin login, lectura pÃºblica permitida)

---

## ğŸ”— RelaciÃ³n con otras historias de usuario

- **HU-01**: Registro de Cliente  
- **HU-02**: Login de Cliente  
- **HU-03**: Crear nueva reserva  
- **HU-13**: Ver detalle completo de una habitaciÃ³n

---

## ğŸ§± Requisitos Previos / Dependencias TÃ©cnicas

- Base de datos con tabla de habitaciones y reservas
- Endpoint: `GET /api/habitaciones/disponibles?fecha_inicio=YYYY-MM-DD&fecha_fin=YYYY-MM-DD&personas=X`
- LÃ³gica en backend que:
  - Detecte si hay conflicto de fechas en reservas existentes
  - Filtros por capacidad mÃ­nima
- Interfaz visual en frontend con:
  - Calendario o picker de fechas
  - Selector de cantidad de personas
  - Lista filtrada en tiempo real o al presionar botÃ³n de bÃºsqueda

---

## âœ… Criterios de AceptaciÃ³n

### ğŸ¯ Criterio 1: Filtro por fecha y personas
- [ ] El cliente o visitante puede seleccionar:
  - Fecha de entrada (check-in)
  - Fecha de salida (check-out)
  - NÃºmero de personas
- [ ] Solo se muestran habitaciones con:
  - Capacidad igual o mayor al nÃºmero de personas
  - Sin reservas activas que se crucen con ese rango de fechas

### ğŸ¯ Criterio 2: Interfaz clara
- [ ] Las habitaciones deben listarse con:
  - Nombre o nÃºmero
  - Capacidad
  - Precio por noche
  - (Opcional) Miniaturas o descripciÃ³n resumida

### ğŸ¯ Criterio 3: Acceso sin login
- [ ] Los usuarios no autenticados tambiÃ©n pueden consultar disponibilidad, pero no pueden reservar.

---

## ğŸ”„ Flujo BÃ¡sico

1. Usuario (cliente o visitante) accede a la vista de bÃºsqueda de habitaciones.
2. Selecciona:
   - Check-in: 15 abril 2025
   - Check-out: 18 abril 2025
   - Personas: 2
3. El frontend hace una peticiÃ³n `GET` con parÃ¡metros a `/api/habitaciones/disponibles`
4. El backend filtra habitaciones que:
   - Tienen capacidad â‰¥ 2
   - No tienen reservas que se crucen con esas fechas
5. El frontend muestra la lista de resultados.
6. El cliente puede seleccionar una para ver detalles (HU-13) o iniciar reserva (HU-03)

---

## ğŸ“‰ Flujos Alternativos

### âŒ No hay habitaciones disponibles
- Mostrar mensaje informativo:  
  > â€œNo se encontraron habitaciones disponibles para esas fechas y cantidad de personasâ€

### âŒ Fechas invÃ¡lidas
- ValidaciÃ³n en frontend: `check-out` no puede ser menor a `check-in`.
- ValidaciÃ³n en backend: rechazar fechas pasadas.

---

## ğŸ”’ Validaciones de Seguridad

- Aunque es una consulta pÃºblica, validar que:
  - Los datos no puedan ser manipulados para acceder a habitaciones no listadas
  - Solo se muestren habitaciones activas (no eliminadas ni fuera de servicio)
- Validar en backend el cruce de fechas con precisiÃ³n

---

## ğŸ§ª Escenarios de prueba

### âœ”ï¸ Consulta vÃ¡lida
```gherkin
Dado que hay habitaciones con disponibilidad
Y el cliente selecciona fechas futuras y 2 personas
Cuando hace la bÃºsqueda
Entonces se deben mostrar las habitaciones disponibles que cumplen los criterios
