# HU-04: Ver mis reservas

---

## ğŸ“ Historia de Usuario

**Como** cliente autenticado,  
**quiero** poder visualizar una lista de mis reservas activas y pasadas,  
**para** confirmar fechas, consultar detalles y gestionar mis futuras estancias en el hotel.

---

## ğŸ“Œ Estatus  
âœ… Pendiente de desarrollo

---

## ğŸ¯ PriorizaciÃ³n  
Media-Alta â€” Es funcionalidad clave para control del cliente, pero depende de que existan reservas previas (HU-03).

---

## ğŸ‘¤ Actor Principal  
Cliente (usuario autenticado con token vÃ¡lido)

---

## ğŸ”— RelaciÃ³n con otras historias de usuario

- **HU-01**: Registro de Cliente  
- **HU-02**: Login de Cliente  
- **HU-03**: Crear nueva reserva  
- **HU-05**: Cancelar una reserva  
- **HU-12**: ConfirmaciÃ³n por cancelaciÃ³n

---

## ğŸ§± Requisitos Previos / Dependencias TÃ©cnicas

- Sistema de autenticaciÃ³n JWT funcionando (HT-03)
- Middleware para proteger rutas por rol
- Endpoint `/api/reservas/mis` con mÃ©todo `GET` filtrado por cliente
- RelaciÃ³n `cliente_id` â†’ `reservas` en la base de datos
- Componente visual en frontend que liste las reservas con paginaciÃ³n u orden cronolÃ³gico

---

## âœ… Criterios de AceptaciÃ³n

### ğŸ¯ Criterio 1: Acceso con sesiÃ³n activa
- [ ] Solo clientes autenticados deben poder acceder a la vista.
- [ ] Si no estÃ¡ autenticado, debe redirigir al login o mostrar mensaje de error.

### ğŸ¯ Criterio 2: VisualizaciÃ³n de reservas
- [ ] La vista debe mostrar una lista de reservas ordenadas (de mÃ¡s reciente a mÃ¡s antigua).
- [ ] Cada reserva debe mostrar al menos:
  - Fechas (check-in y check-out)
  - NÃºmero de personas
  - NÃºmero o nombre de habitaciÃ³n
  - Estado: activa / cancelada / finalizada

### ğŸ¯ Criterio 3: Ver detalles individuales
- [ ] Al hacer clic en una reserva, el cliente debe poder ver detalles ampliados:
  - Servicios incluidos
  - Fecha de creaciÃ³n
  - ID de la reserva
  - (Opcional) Total pagado o monto estimado

### ğŸ¯ Criterio 4: Accesibilidad y experiencia de usuario
- [ ] Debe tener diseÃ±o responsive para dispositivos mÃ³viles
- [ ] Debe tener mensaje si no hay reservas:
  > "AÃºn no has realizado ninguna reserva"

---

## ğŸ”„ Flujo BÃ¡sico

1. Cliente inicia sesiÃ³n (HU-02).
2. Desde su panel, accede a â€œMis Reservasâ€.
3. El sistema hace una llamada `GET /api/reservas/mis` con el token JWT.
4. El backend filtra las reservas segÃºn el `cliente_id` del token.
5. Se devuelven las reservas en formato JSON.
6. El frontend renderiza la lista y permite acceder a detalles individuales.

---

## ğŸ“‰ Flujos Alternativos

### âŒ Sin reservas registradas
- El sistema muestra un mensaje tipo â€œNo tienes reservas registradas aÃºnâ€.

### âŒ Token invÃ¡lido o expirado
- El backend responde 401.
- El frontend redirige a login con mensaje â€œTu sesiÃ³n ha expiradoâ€.

---

## ğŸ”’ Validaciones de Seguridad

- Middleware backend que extrae `cliente_id` desde el token.
- El backend nunca debe aceptar `cliente_id` enviado desde frontend.
- Asegurar que un cliente no pueda ver reservas de otro (incluso si manipula la URL).

---

## ğŸ§ª Escenarios de prueba

### âœ”ï¸ Cliente ve sus reservas
```gherkin
Dado que el cliente tiene reservas registradas
Cuando accede a la vista â€œMis Reservasâ€
Entonces el sistema debe mostrar la lista con fechas, habitaciÃ³n y estado
