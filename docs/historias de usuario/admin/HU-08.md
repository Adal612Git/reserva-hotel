# HU-08: Crear una habitaciÃ³n

---

## ğŸ“ Historia de Usuario

**Como** administrador del sistema,  
**quiero** poder registrar nuevas habitaciones en el sistema indicando sus caracterÃ­sticas,  
**para** ampliar el inventario disponible y permitir que los clientes puedan reservarlas.

---

## ğŸ“Œ Estatus  
âœ… Pendiente de desarrollo

---

## ğŸ¯ PriorizaciÃ³n  
Alta â€” Requisito fundamental para que el sistema tenga oferta de habitaciones disponible para reservas (HU-06, HU-03).

---

## ğŸ‘¤ Actor Principal  
Administrador (usuario con rol autorizado y sesiÃ³n activa)

---

## ğŸ”— RelaciÃ³n con otras historias de usuario

- **HU-09**: Eliminar o desactivar habitaciÃ³n  
- **HU-16**: Editar habitaciÃ³n  
- **HU-06**: Ver habitaciones disponibles  
- **HU-03**: Crear nueva reserva (usa las habitaciones creadas)

---

## ğŸ§± Requisitos Previos / Dependencias TÃ©cnicas

- Sistema de autenticaciÃ³n y middleware por roles (HT-03, HT-04, HT-12)
- Panel administrativo en frontend para acceder al formulario
- Endpoint `POST /api/habitaciones`
- ValidaciÃ³n de datos y unicidad de nÃºmero de habitaciÃ³n
- Tabla `habitaciones` en la base de datos

---

## âœ… Criterios de AceptaciÃ³n

### ğŸ¯ Criterio 1: Acceso restringido
- [ ] Solo usuarios con rol `admin` pueden ver y usar el formulario de creaciÃ³n.
- [ ] Usuarios no autorizados deben recibir error 403 o ser redirigidos.

### ğŸ¯ Criterio 2: Formulario de creaciÃ³n
- [ ] El formulario debe incluir los siguientes campos obligatorios:
  - NÃºmero de habitaciÃ³n (Ãºnico)
  - Tipo de habitaciÃ³n (ej. individual, doble, suite)
  - Capacidad mÃ¡xima
  - Precio por noche
  - Servicios incluidos (checkbox o lista)
  - Estado inicial: activa
- [ ] Debe incluir campos opcionales:
  - DescripciÃ³n
  - GalerÃ­a de imÃ¡genes (upload opcional)
  - Piso o torre (si aplica)

### ğŸ¯ Criterio 3: ValidaciÃ³n en backend
- [ ] No se puede registrar una habitaciÃ³n con nÃºmero duplicado.
- [ ] El precio y la capacidad deben ser valores numÃ©ricos vÃ¡lidos.
- [ ] Debe registrar fecha y hora de creaciÃ³n automÃ¡ticamente.

### ğŸ¯ Criterio 4: ConfirmaciÃ³n visual
- [ ] Al guardar correctamente:
  - Se muestra un mensaje:  
    > â€œHabitaciÃ³n creada correctamenteâ€
  - La habitaciÃ³n aparece en la lista de habitaciones en el panel admin.

---

## ğŸ”„ Flujo BÃ¡sico

1. Administrador accede al panel â€œHabitacionesâ€.
2. Hace clic en â€œCrear nueva habitaciÃ³nâ€.
3. Llena el formulario con los datos necesarios.
4. El sistema valida los datos.
5. Se guarda en la base de datos.
6. Se muestra confirmaciÃ³n visual.
7. La nueva habitaciÃ³n aparece en el inventario y estÃ¡ disponible para reservas (si estÃ¡ activa).

---

## ğŸ“‰ Flujos Alternativos

### âŒ NÃºmero de habitaciÃ³n duplicado
- Mostrar mensaje:
  > â€œYa existe una habitaciÃ³n con ese nÃºmeroâ€

### âŒ Usuario sin permisos
- Mostrar error 403 o redirecciÃ³n a pantalla de acceso no autorizado

### âŒ Datos invÃ¡lidos
- Mostrar validaciones campo por campo (precio, capacidad, etc.)

---

## ğŸ”’ Validaciones de Seguridad

- Middleware por rol `admin` para proteger la ruta y formulario
- Validaciones de tipos y valores en backend
- PrevenciÃ³n de inyecciones en campos como descripciÃ³n o servicios

---

## ğŸ§ª Escenarios de prueba

### âœ”ï¸ CreaciÃ³n vÃ¡lida
```gherkin
Dado que el administrador accede al panel de habitaciones
Y llena todos los campos correctamente
Cuando presiona â€œCrearâ€
Entonces la habitaciÃ³n debe guardarse y mostrarse en la lista
